/* static/chart.css */

/* =========================================
   1. GRID LAYOUT SYSTEM
   ========================================= */
.charts-grid {
    display: grid;
    /* Giảm minmax xuống 350px để dễ dàng chia 3 cột trên màn hình Laptop */
    grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
    gap: 20px;
    padding: 0 30px;
    margin-bottom: 30px;
    /* Quan trọng: Các dòng tự động cao bằng nhau */
    grid-auto-rows: 1fr;
}

/* =========================================
   2. CARD CONTAINER
   ========================================= */
.chart-container {
    background: white;
    padding: 20px;
    border-radius: 12px;
    box-shadow: 0 4px 6px -1px rgba(0,0,0,0.1);
    
    /* Flex column để body dãn hết chiều cao */
    display: flex;
    flex-direction: column;
    height: 100%; 
    min-height: 420px; /* Tăng chiều cao tối thiểu lên để Map không bị ngắn */
}

.chart-title {
    margin-bottom: 15px;
    color: #334155;
    font-size: 16px;
    font-weight: 600;
    flex-shrink: 0; /* Không cho tiêu đề bị co lại */
}

/* Phần thân chứa biểu đồ - CHIẾM HẾT KHOẢNG TRỐNG */
.chart-body {
    flex: 1; /* Quan trọng: Tự dãn để lấp đầy card */
    display: flex;
    gap: 15px;
    align-items: center;
    justify-content: center;
    position: relative; /* Để con bên trong định vị tuyệt đối nếu cần */
    overflow: hidden; /* Ẩn phần thừa nếu chart bị tràn */
}

/* =========================================
   3. CÁC LOẠI BIỂU ĐỒ (SỬA LỖI FLEX)
   ========================================= */

/* --- A. Line Chart --- */
.line-chart-wrapper {
    width: 100%;
    height: 100%;
    min-height: 300px;
    /* Fix lỗi Flexbox: Giúp chart co lại được khi màn hình nhỏ */
    min-width: 0; 
}

/* --- B. Donut Chart --- */
.donut-wrapper {
    position: relative;
    width: 200px;
    height: 200px;
    flex-shrink: 0;
}

.center-text {
    position: absolute;
    top: 50%; left: 50%;
    transform: translate(-50%, -50%);
    text-align: center;
    pointer-events: none;
}
.center-label { font-size: 11px; color: #64748b; }
.center-value { font-size: 20px; font-weight: 700; color: #334155; }

/* --- C. Map Chart (FIX LỖI CHÍNH Ở ĐÂY) --- */
.map-wrapper {
    /* Ép chiếm 100% không gian cha */
    flex: 1;
    width: 100%;
    height: 100%; 
    min-height: 350px; /* Đảm bảo độ cao tối thiểu cho map */
    
    /* FIX LỖI QUAN TRỌNG: Highcharts cần cái này để không bị tràn */
    min-width: 0; 
    display: flex; /* Để căn giữa cái map bên trong */
    justify-content: center;
}

#vietnamMap {
    width: 100%;
    height: 100%;
}

/* =========================================
   4. DATA TABLE (BẢNG BÊN CẠNH PIE CHART)
   ========================================= */
.table-wrapper {
    flex: 1;
    min-width: 0; /* Fix lỗi bảng đẩy chart ra ngoài */
    overflow-y: auto;
    max-height: 350px;
    padding-right: 5px; /* Tránh thanh cuộn che chữ */
}

.minimal-table {
    width: 100%;
    border-collapse: separate;
    border-spacing: 0 6px;
    font-size: 13px;
}

.minimal-table th {
    text-align: left; color: #64748b; font-weight: 600;
    padding-bottom: 5px; font-size: 11px; text-transform: uppercase;
}
.minimal-table td { padding: 6px 8px; vertical-align: middle; }

/* Các cột */
.col-index { color: #94a3b8; width: 25px; font-size: 11px; }
.col-name { font-weight: 500; color: #334155; font-size: 12px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis; max-width: 120px; }
.col-value { text-align: right; position: relative; width: 80px; }

/* Thanh Data Bar */
.data-bar {
    position: absolute; top: 4px; bottom: 4px; right: 0;
    background-color: #e0f2fe; border-radius: 4px; z-index: 1;
}
.value-text { position: relative; z-index: 2; font-weight: 600; color: #0f172a; font-size: 12px; }

/* Responsive Mobile */
@media (max-width: 768px) {
    .chart-body { flex-direction: column; }
    .donut-wrapper, .map-wrapper { height: 250px; width: 100%; }
    .table-wrapper { width: 100%; max-height: none; }
}